

二、计算机信息的表示和处理

    


三、程序机器代码表示

    3.1 机器代码的基础
                   
                  编译器                         链接器
        (1) 源代码 ------> 汇编代码(机器代码的文本) --------> 机器代码
    
        (2) 寄存器：
        
                --程序计数器：记录下一个指令的内存地址。 
                --整数寄存器：存储整数,状态,内存地址,临时数据(参数,局部变量,返回值)
                --条件码寄存：保存最近的执行算数和逻辑指令的状态信息。主要实现if、while
                --向量寄存器：存储一个或者一组整数或者浮点数。
                
        (3) 汇编代码和机器代码的区别：
        
                -- x86-64的一条指令的程度为0-15个字节不等。常用的指令的字节数较少,
                        不常用的指令的字节数较长。
                -- 每个指令都对应唯一的开头字节, 如 pushq %rdx , pushq 对应的机器
                        代码为53开头。
                -- 汇编代码可以根据机器代码的序列生成,可以不需要通过源代码编译生成。
        
        
    3.2 指令的构成
    
        (1) 数据格式
        
            声明       intel数据类型          指令后缀        大小(字节)
            
            char          字                   b             1
            short        双字                  w             2
            int          四字                  l             4
            long         八字                  q             8
            float       单精度                 s             4
            double      双精度                 l             8
            
            注意：int 和 double使用相同的指令后缀,但是他们的执行指令是不一样的,
                 并且使用的寄存器也不一样。      
                 
        (2) 整数寄存器分析
        
            字节    61               31              15          7       0         描述
                
            寄存器  %rax             %eax            %ax         %al               存储返回值 
                   %rbx             %ebx            %bx         %bl               别调用者保存  
                   %rcx             %ecx            %cx         %cl               第四个参数  
                   %rdx             %edx            %dx         %dl               第三个参数  
                   %rsi             %esi            %si         %sil              第二个参数  
                   %rdi             %edi            %di         %dil              第一个参数
                   %rbp             %ebp            %bp         %bpl              被调用者保存        
                   %rsp             %esp            %sp         %spl              栈指针 
                  
                   %r8              %r8d            %r8w        %r8b              第五个参数           
                   %r9              %r9d            %r9w        %r9b              第六个参数  
                   %r10             %r10d            %r10w        %r10b           调用者保存  
                   %r11             %r11d            %r11w        %r11b           调用者保存  
                   %r12             %r12d            %r12w        %r12b           被调用者保存
                   %r13             %r13d            %r13w        %r13b           被调用者保存
                   %r14             %r14d            %r14w        %r14b           被调用者保存
                   %r15             %r15d            %r15w        %r15b           被调用者保存
                   
                   解释：扩展到IA32架构时,扩展了8个证书通用寄存器。每个寄存器都有64个位存储数据。
                        -- 每个寄存器提供4种访问方式：
                           指令后缀： 
                                    b: 访问寄存器最低8位
                                    w: 访问寄存器最低16位
                                    l: 访问寄存器最低32位
                                    q: 访问寄存器最低64位(整个寄存器)
                   
                   寄存器具有一组标准管理栈,参数传递,返回值,局部变量和临时数据。
            
            (3) 操作数的表示
                    
                 -- 操作数分类：
                        
                        立即数：$10,存储在寄存器或者内存中。
                        内存地址：M[addr],计算内存地址,访问内存地址的值。
                        寄存器：R[ra],R代表寄存器集合,ra代表寄存器的索引。
                                每个寄存器中的0-7,0-15,0-31,0-63的字节序列代表一个操作数。   
                 
                 -- 寻址方式：
                    
                        类型                  格式              操作数值            名称
                                               